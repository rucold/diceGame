<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ²ëª½ê³¨ ì£¼ì‚¬ìœ„ ê²Œì„ğŸ²</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background-color: #f8f9fa; margin: 0; padding: 20px; box-sizing: border-box; }
        .container { width: 100%; max-width: 500px; text-align: center; background: white; padding: 1.5rem; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
        
        /* ì£¼ì‚¬ìœ„ ì»¨í…Œì´ë„ˆ: ê°œìˆ˜ê°€ ë§ìœ¼ë©´ ì¤„ë°”ê¿ˆ í—ˆìš© */
        #dice-container { 
            display: flex; 
            gap: 12px; 
            justify-content: center; 
            align-items: center;
            flex-wrap: wrap; /* ì£¼ì‚¬ìœ„ê°€ ë§ìœ¼ë©´ ë‹¤ìŒ ì¤„ë¡œ ë„˜ì–´ê°€ê²Œ í•¨ */
            margin: 30px 0; 
            min-height: 120px; 
        }

        /* ì£¼ì‚¬ìœ„ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .dice { 
            background: white; 
            border: 3px solid #333; 
            border-radius: 15px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 2rem; 
            font-weight: bold;
            box-shadow: 0 6px 0 #333, 0 10px 20px rgba(0,0,0,0.2); /* í•˜ë‹¨ ë‘ê»˜ê°ìœ¼ë¡œ 3D ëŠë‚Œ */
            transition: all 0.2s ease;
            transform-style: preserve-3d; /* 3D íš¨ê³¼ ìœ ì§€ */
        }

        /* ì£¼ì‚¬ìœ„ver.2 */
        .dice { 
            background: white; 
            border: 3px solid #333; 
            border-radius: 15px; 
            display: grid; /* Grid ì‚¬ìš© */
            grid-template-areas:
                "a . b"
                "c d e"
                "f . g";
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            padding: 8px;
            width: 80px; height: 80px; 
            box-sizing: border-box;
            box-shadow: 0 6px 0 #333;
            transition: all 0.2s ease;
        }
        
        /* ì£¼ì‚¬ìœ„ ì  ìŠ¤íƒ€ì¼ */
        .dot {
            background-color: #333;
            border-radius: 50%;
            width: 14px;
            height: 14px;
            align-self: center;
            justify-self: center;
        }
        
        /* êµ´ëŸ¬ê°ˆ ë•Œ ì  ìƒ‰ìƒ ë³€ê²½ */
        .rolling .dot { background-color: #ff4757; }
        
        /* 4ê°œ ì´ìƒì¼ ë•Œ ì£¼ì‚¬ìœ„ í¬ê¸° ì¡°ì • */
        .size-small { width: 65px; height: 65px; padding: 5px; }
        .size-small .dot { width: 10px; height: 10px; }

        /* ì£¼ì‚¬ìœ„ ê°œìˆ˜ì— ë”°ë¥¸ í¬ê¸° ìµœì í™” */
        .size-large { width: 85px; height: 85px; font-size: 2.2rem; }
        .size-small { width: 70px; height: 70px; font-size: 1.8rem; }
        
        /* êµ´ëŸ¬ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
        /*.rolling { animation: shake 0.15s infinite; color: #ff4757; border-color: #ff4757; box-shadow: 4px 4px 0px #ff4757; }
        @keyframes shake {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(10deg) scale(1.05); }
            75% { transform: rotate(-10deg) scale(0.95); }
            100% { transform: rotate(0deg); }
        }*/
        .rolling { 
            animation: realRoll 0.15s infinite alternate ease-in-out; 
            color: #ff4757; 
            border-color: #ff4757; 
        }
        
        @keyframes realRoll {
            0% { 
                transform: translateY(0) rotateX(0deg) rotateY(0deg) scale(1);
                box-shadow: 0 6px 0 #333, 0 10px 20px rgba(0,0,0,0.2);
            }
            100% { 
                /* ê³µì¤‘ìœ¼ë¡œ íŠ€ì–´ì˜¤ë¥´ë©° í¬ê¸°ê°€ ì‚´ì§ ì»¤ì§€ê³  íšŒì „í•¨ */
                transform: translateY(-35px) rotateX(180deg) rotateY(180deg) scale(1.1);
                box-shadow: 0 40px 30px rgba(0,0,0,0.1); /* ê³µì¤‘ì— ë–´ì„ ë•Œ ê·¸ë¦¼ì íë¦¿í•˜ê²Œ */
            }
        }

        .controls { margin-bottom: 25px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn { padding: 12px 20px; font-size: 1rem; cursor: pointer; border: none; border-radius: 12px; background: #333; color: white; transition: 0.2s; -webkit-tap-highlight-color: transparent; }
        .btn:active { transform: scale(0.92); }
        .btn:disabled { background: #eee; color: #999; cursor: not-allowed; }
        
        #roll-btn { background: #4834d4; font-weight: bold; width: 100%; max-width: 250px; height: 60px; font-size: 1.2rem; margin-top: 10px; }
        #roll-btn.charging { background: #eb4d4b; animation: pulse 0.5s infinite; }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .status { margin-top: 15px; color: #666; font-size: 0.95rem; font-weight: 500; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="margin-top:0">ğŸ²ëª½ê³¨ ì£¼ì‚¬ìœ„ ê²Œì„ğŸ²</h2>
    
    <div class="controls">
        <button class="btn" onclick="updateDiceCount(-1)">ï¼</button>
        <div style="min-width: 80px;">
            <span id="dice-count-display" style="font-size: 1.6rem; font-weight: 800;">2</span>ê°œ
        </div>
        <button class="btn" onclick="updateDiceCount(1)">ï¼‹</button>
    </div>

    <div id="dice-container"></div>

    <button id="roll-btn" class="btn" onclick="handleRollClick()">ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
    <div class="status" id="status-text">ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (0/5)</div>
</div>

<script>
    let diceCount = 2;
    let clickCount = 0;
    let timer = null;
    let isRolling = false;

    function initDice() {
        const container = document.getElementById('dice-container');
        container.innerHTML = '';
        
        // ê°œìˆ˜ê°€ 4ê°œ ì´ìƒì´ë©´ í¬ê¸°ë¥¼ ì¤„ì„
        const sizeClass = diceCount >= 4 ? 'size-small' : 'size-large';

        for (let i = 0; i < diceCount; i++) {
            const dice = document.createElement('div');
            dice.className = `dice ${sizeClass}`;
            dice.innerText = '?';
            container.appendChild(dice);
        }
    }

    function updateDiceCount(val) {
        if (isRolling) return;
        const newCount = diceCount + val;
        if (newCount >= 2 && newCount <= 5) {
            diceCount = newCount;
            document.getElementById('dice-count-display').innerText = diceCount;
            initDice();
        }
    }

    function handleRollClick() {
        if (isRolling) return;
        clickCount++;
        const btn = document.getElementById('roll-btn');
        const status = document.getElementById('status-text');

        if (clickCount === 1) {
            btn.classList.add('charging');
            timer = setTimeout(() => {
                if (clickCount < 5) {
                    resetClicks();
                    alert("ì‹œê°„ ì´ˆê³¼! ë” ë¹¨ë¦¬ ëˆ„ë¥´ì„¸ìš”!");
                }
            }, 2000);
        }

        status.innerText = `ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (${clickCount}/5)`;

        if (clickCount >= 5) {
            clearTimeout(timer);
            startRolling();
        }
    }

    function resetClicks() {
        clickCount = 0;
        document.getElementById('roll-btn').classList.remove('charging');
        document.getElementById('status-text').innerText = "ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (0/5)";
    }

    function startRolling() {
        isRolling = true;
        const diceElements = document.querySelectorAll('.dice');
        const btn = document.getElementById('roll-btn');
        btn.disabled = true;
        btn.innerText = "êµ´ë¦¬ëŠ” ì¤‘...";
    
        diceElements.forEach((d, index) => {
            // ê° ì£¼ì‚¬ìœ„ë§ˆë‹¤ 0.0xì´ˆì”© ì°¨ì´ë¥¼ ë‘ì–´ ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“­ë‹ˆë‹¤.
            const delay = Math.random() * 0.1;
            d.style.animationDelay = `${delay}s`; 
            d.classList.add('rolling');
        });
    
        // 1.2ì´ˆ ë’¤ ê²°ê³¼ ë„ì¶œ
        setTimeout(() => {
            diceElements.forEach(d => {
                d.classList.remove('rolling');
                d.style.animationDelay = "0s"; // ë”œë ˆì´ ì´ˆê¸°í™”
                
                const num = Math.floor(Math.random() * 6) + 1;
                setDiceDots(d, num); // ì´ì „ì— ë§Œë“  ì (Dot) ìƒì„± í•¨ìˆ˜ í˜¸ì¶œ
                
                // ë©ˆì¶œ ë•Œ ë°”ë‹¥ì— 'ì°©' ë¶™ëŠ” ëŠë‚Œì„ ìœ„í•´ ëœë¤ ê°ë„ ë¶€ì—¬
                const rX = Math.random() * 20 - 10;
                const rY = Math.random() * 20 - 10;
                d.style.transform = `translateY(0) rotateX(${rX}deg) rotateY(${rY}deg)`;
            });
            
            isRolling = false;
            btn.disabled = false;
            btn.innerText = "ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°";
            resetClicks();
        }, 1200);
    }

    initDice();
</script>

</body>
</html>



