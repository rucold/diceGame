<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ²ëª½ê³¨ ì£¼ì‚¬ìœ„ ê²Œì„ğŸ²</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background-color: #f8f9fa; margin: 0; padding: 20px; box-sizing: border-box; }
        .container { width: 100%; max-width: 500px; text-align: center; background: white; padding: 1.5rem; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
        
        /* ì£¼ì‚¬ìœ„ ì»¨í…Œì´ë„ˆ: ê°œìˆ˜ê°€ ë§ìœ¼ë©´ ì¤„ë°”ê¿ˆ í—ˆìš© */
        #dice-container { 
            display: flex; 
            gap: 12px; 
            justify-content: center; 
            align-items: center;
            flex-wrap: wrap; /* ì£¼ì‚¬ìœ„ê°€ ë§ìœ¼ë©´ ë‹¤ìŒ ì¤„ë¡œ ë„˜ì–´ê°€ê²Œ í•¨ */
            margin: 30px 0; 
            min-height: 120px; 
        }

        /* ì£¼ì‚¬ìœ„ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .dice { 
            background: white; 
            border: 3px solid #333; 
            border-radius: 15px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 2rem; 
            font-weight: bold;
            box-shadow: 0 6px 0 #333, 0 10px 20px rgba(0,0,0,0.2); /* í•˜ë‹¨ ë‘ê»˜ê°ìœ¼ë¡œ 3D ëŠë‚Œ */
            transition: all 0.2s ease;
            transform-style: preserve-3d; /* 3D íš¨ê³¼ ìœ ì§€ */
        }

        /* ì£¼ì‚¬ìœ„ ê°œìˆ˜ì— ë”°ë¥¸ í¬ê¸° ìµœì í™” */
        .size-large { width: 85px; height: 85px; font-size: 2.2rem; }
        .size-small { width: 70px; height: 70px; font-size: 1.8rem; }
        
        /* êµ´ëŸ¬ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
        /*.rolling { animation: shake 0.15s infinite; color: #ff4757; border-color: #ff4757; box-shadow: 4px 4px 0px #ff4757; }
        @keyframes shake {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(10deg) scale(1.05); }
            75% { transform: rotate(-10deg) scale(0.95); }
            100% { transform: rotate(0deg); }
        }*/
        .rolling { //3DëŠë‚Œ
            animation: roll3D 0.15s infinite linear; 
            color: #ff4757; 
            border-color: #ff4757; 
            box-shadow: 0 0px 0 #ff4757, 0 5px 15px rgba(255,71,87,0.4); 
        }

        @keyframes roll3D {
            0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateY(0); }
            25% { transform: rotateX(90deg) rotateY(45deg) rotateZ(10deg) translateY(-10px); }
            50% { transform: rotateX(180deg) rotateY(90deg) rotateZ(-10deg) translateY(-20px); }
            75% { transform: rotateX(270deg) rotateY(135deg) rotateZ(5deg) translateY(-10px); }
            100% { transform: rotateX(360deg) rotateY(180deg) rotateZ(0deg) translateY(0); }
        }

        .controls { margin-bottom: 25px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn { padding: 12px 20px; font-size: 1rem; cursor: pointer; border: none; border-radius: 12px; background: #333; color: white; transition: 0.2s; -webkit-tap-highlight-color: transparent; }
        .btn:active { transform: scale(0.92); }
        .btn:disabled { background: #eee; color: #999; cursor: not-allowed; }
        
        #roll-btn { background: #4834d4; font-weight: bold; width: 100%; max-width: 250px; height: 60px; font-size: 1.2rem; margin-top: 10px; }
        #roll-btn.charging { background: #eb4d4b; animation: pulse 0.5s infinite; }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        
        .status { margin-top: 15px; color: #666; font-size: 0.95rem; font-weight: 500; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="margin-top:0">ğŸ²ëª½ê³¨ ì£¼ì‚¬ìœ„ ê²Œì„ğŸ²</h2>
    
    <div class="controls">
        <button class="btn" onclick="updateDiceCount(-1)">ï¼</button>
        <div style="min-width: 80px;">
            <span id="dice-count-display" style="font-size: 1.6rem; font-weight: 800;">2</span>ê°œ
        </div>
        <button class="btn" onclick="updateDiceCount(1)">ï¼‹</button>
    </div>

    <div id="dice-container"></div>

    <button id="roll-btn" class="btn" onclick="handleRollClick()">ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
    <div class="status" id="status-text">ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (0/5)</div>
</div>

<script>
    let diceCount = 2;
    let clickCount = 0;
    let timer = null;
    let isRolling = false;

    function initDice() {
        const container = document.getElementById('dice-container');
        container.innerHTML = '';
        
        // ê°œìˆ˜ê°€ 4ê°œ ì´ìƒì´ë©´ í¬ê¸°ë¥¼ ì¤„ì„
        const sizeClass = diceCount >= 4 ? 'size-small' : 'size-large';

        for (let i = 0; i < diceCount; i++) {
            const dice = document.createElement('div');
            dice.className = `dice ${sizeClass}`;
            dice.innerText = '?';
            container.appendChild(dice);
        }
    }

    function updateDiceCount(val) {
        if (isRolling) return;
        const newCount = diceCount + val;
        if (newCount >= 2 && newCount <= 5) {
            diceCount = newCount;
            document.getElementById('dice-count-display').innerText = diceCount;
            initDice();
        }
    }

    function handleRollClick() {
        if (isRolling) return;
        clickCount++;
        const btn = document.getElementById('roll-btn');
        const status = document.getElementById('status-text');

        if (clickCount === 1) {
            btn.classList.add('charging');
            timer = setTimeout(() => {
                if (clickCount < 5) {
                    resetClicks();
                    alert("ì‹œê°„ ì´ˆê³¼! ë” ë¹¨ë¦¬ ëˆ„ë¥´ì„¸ìš”!");
                }
            }, 2000);
        }

        status.innerText = `ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (${clickCount}/5)`;

        if (clickCount >= 5) {
            clearTimeout(timer);
            startRolling();
        }
    }

    function resetClicks() {
        clickCount = 0;
        document.getElementById('roll-btn').classList.remove('charging');
        document.getElementById('status-text').innerText = "ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (0/5)";
    }

    function startRolling() {
        isRolling = true;
        const diceElements = document.querySelectorAll('.dice');
        const btn = document.getElementById('roll-btn');
        btn.disabled = true;
        btn.innerText = "êµ´ë¦¬ëŠ” ì¤‘...";

        diceElements.forEach(d => d.classList.add('rolling'));

        setTimeout(() => {
            diceElements.forEach(d => {
                d.classList.remove('rolling');
                d.innerText = Math.floor(Math.random() * 6) + 1;
                // ëœë¤í•œ ê°ë„ë¡œ ë©ˆì¶°ì„œ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ì¶œ
                d.style.transform = `rotate(${Math.random() * 16 - 8}deg)`;
            });
            
            isRolling = false;
            btn.disabled = false;
            btn.innerText = "ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°";
            resetClicks();
        }, 1200);
    }

    initDice();
</script>

</body>
</html>

