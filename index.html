<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ²MonGolia DiceğŸ²</title>
    <style>
        body { 
            font-family: 'Pretendard', -apple-system, sans-serif; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            min-height: 100vh; background-color: #f0f3f7; margin: 0; padding: 20px; box-sizing: border-box; 
        }
        .container { 
            width: 100%; max-width: 450px; text-align: center; background: white; 
            padding: 2rem; border-radius: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); 
        }
        
        /* ì£¼ì‚¬ìœ„ ì»¨í…Œì´ë„ˆ ë° ë°˜ì‘í˜• ë°°ì¹˜ */
        #dice-container { 
            display: flex; gap: 15px; justify-content: center; align-items: center;
            flex-wrap: wrap; margin: 40px 0; min-height: 180px;
            perspective: 1000px; /* 3D íš¨ê³¼ë¥¼ ìœ„í•œ ì›ê·¼ê° */
        }

        /* ì£¼ì‚¬ìœ„ ë³¸ì²´ ìŠ¤íƒ€ì¼ */
        .dice { 
            background: white; border: 2px solid #333; border-radius: 12px; 
            display: grid; padding: 8px; box-sizing: border-box;
            grid-template-areas: "a . b" "c d e" "f . g";
            grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);
            width: 80px; height: 80px;
            box-shadow: 0 6px 0 #333, 0 10px 20px rgba(0,0,0,0.15);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }

        /* ì (Dot) ìŠ¤íƒ€ì¼ */
        .dot { 
            background-color: #333; border-radius: 50%; width: 14px; height: 14px; 
            align-self: center; justify-self: center; 
        }

        /* êµ´ëŸ¬ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜ (ë¬¼ë¦¬ íš¨ê³¼ ì ìš©) */
        .rolling { 
            animation: realRoll 0.18s infinite alternate ease-in-out; 
            border-color: #ff4757; 
        }
        .rolling .dot { background-color: #ff4757; }

        @keyframes realRoll {
            0% { transform: translateY(0) rotateX(0deg) rotateY(0deg); box-shadow: 0 6px 0 #333; }
            100% { transform: translateY(-40px) rotateX(180deg) rotateY(180deg); box-shadow: 0 40px 30px rgba(0,0,0,0.1); }
        }

        /* ì£¼ì‚¬ìœ„ ê°œìˆ˜ì— ë”°ë¥¸ í¬ê¸° ì¡°ì • */
        .size-small { width: 65px; height: 65px; padding: 6px; }
        .size-small .dot { width: 10px; height: 10px; }

        /* ì»¨íŠ¸ë¡¤ ì˜ì—­ */
        .controls { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 25px; }
        .btn { 
            padding: 7px 15px; font-size: 1rem; cursor: pointer; border: none; 
            border-radius: 10px; background: #333; color: white; font-weight: bold;
            transition: 0.2s; -webkit-tap-highlight-color: transparent;
        }
        .btn:active { transform: scale(0.92); }
        .btn:disabled { background: #eee; color: #aaa; }
        
        #roll-btn { background: #4834d4; width: 100%; max-width: 280px; height: 65px; font-size: 1.2rem; }
        #roll-btn.charging { background: #eb4d4b; animation: pulse 0.5s infinite; }
        
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        
        .status { margin-top: 20px; color: #777; font-size: 0.95rem; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="margin-top:0; color:#333;">ğŸ²MonGolia DiceğŸ²</h2> <div class="controls">
        <button class="btn" onclick="updateDiceCount(-1)">ï¼</button>
        <span id="dice-count-display" style="font-size: 1rem; font-weight: 1100; min-width: 20px;">1</span>
        <button class="btn" onclick="updateDiceCount(1)">ï¼‹</button>
    </div>

    <div id="dice-container"></div>

    <button id="roll-btn" class="btn" onclick="handleRollClick()">ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
    <div class="status" id="status-text">ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (0/5)</div>
</div>

<script>
    let diceCount = 2;
    let clickCount = 0;
    let timer = null;
    let isRolling = false;

    // ì£¼ì‚¬ìœ„ ìˆ«ìë³„ ì  ìœ„ì¹˜ ì •ì˜
    const dotPositions = {
        1: ['d'],
        2: ['a', 'g'],
        3: ['a', 'd', 'g'],
        4: ['a', 'b', 'f', 'g'],
        5: ['a', 'b', 'd', 'f', 'g'],
        6: ['a', 'b', 'c', 'e', 'f', 'g']
    };

    function setDiceDots(diceElement, number) {
        diceElement.innerHTML = '';
        dotPositions[number].forEach(pos => {
            const dot = document.createElement('div');
            dot.className = 'dot';
            dot.style.gridArea = pos;
            diceElement.appendChild(dot);
        });
    }

    // ì´ˆê¸°í™” ë° ê°œìˆ˜ ë³€ê²½ ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
function initDice() {
    const container = document.getElementById('dice-container');
    container.innerHTML = '';
    const sizeClass = diceCount >= 4 ? 'size-small' : '';

    for (let i = 0; i < diceCount; i++) {
        const dice = document.createElement('div');
        dice.className = `dice ${sizeClass}`;
        
        // [ìˆ˜ì • í¬ì¸íŠ¸] ìƒì„±ë  ë•Œë§ˆë‹¤ 1~6 ì‚¬ì´ì˜ ëœë¤ ìˆ«ìë¥¼ ë¶€ì—¬í•¨
        const startNum = Math.floor(Math.random() * 6) + 1;
        setDiceDots(dice, startNum); 
        
        // ì‹œê°ì ìœ¼ë¡œ ìƒˆë¡œ ìƒê¸´ ëŠë‚Œì„ ì£¼ê¸° ìœ„í•´ ì‚´ì§ ëœë¤ ê°ë„ ë¶€ì—¬
        const rX = Math.random() * 20 - 10;
        const rY = Math.random() * 20 - 10;
        dice.style.transform = `rotateX(${rX}deg) rotateY(${rY}deg)`;
        
        container.appendChild(dice);
    }
}

// ê°œìˆ˜ ì¡°ì ˆ í•¨ìˆ˜
function updateDiceCount(val) {
    if (isRolling) return;
    const newCount = diceCount + val;
    if (newCount >= 2 && newCount <= 5) {
        diceCount = newCount;
        document.getElementById('dice-count-display').innerText = diceCount;
        
        // ê°œìˆ˜ê°€ ë°”ë€” ë•Œë§ˆë‹¤ initDiceê°€ í˜¸ì¶œë˜ì–´ ëœë¤í•˜ê²Œ ë¦¬ì…‹ë¨
        initDice(); 
        
        // ë¦¬ì…‹ë  ë•Œ ì§§ì€ ì§„ë™ íš¨ê³¼ (ì„ íƒ ì‚¬í•­)
        const container = document.getElementById('dice-container');
        container.style.transform = 'scale(0.98)';
        setTimeout(() => container.style.transform = 'scale(1)', 100);
    }
}

    function handleRollClick() {
        if (isRolling) return;
        clickCount++;
        const btn = document.getElementById('roll-btn');
        const status = document.getElementById('status-text');

        if (clickCount === 1) {
            btn.classList.add('charging');
            timer = setTimeout(() => {
                if (clickCount < 5) {
                    resetClicks();
                    alert("ì‹¤íŒ¨! ë” ë¹ ë¥´ê²Œ ì—°íƒ€í•˜ì„¸ìš”!");
                }
            }, 2000);
        }

        status.innerText = `ë”ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (${clickCount}/5)`;

        if (clickCount >= 5) {
            clearTimeout(timer);
            startRolling();
        }
    }

    function resetClicks() {
        clickCount = 0;
        const btn = document.getElementById('roll-btn');
        btn.classList.remove('charging');
        document.getElementById('status-text').innerText = "ë¹ ë¥´ê²Œ 5ë²ˆ ëˆ„ë¥´ì„¸ìš”! (0/5)";
    }

    function startRolling() {
        isRolling = true;
        const diceElements = document.querySelectorAll('.dice');
        const btn = document.getElementById('roll-btn');
        btn.disabled = true;
        btn.innerText = "êµ´ëŸ¬ê°€ëŠ” ì¤‘...";

        diceElements.forEach((d) => {
            d.style.animationDelay = `${Math.random() * 0.1}s`;
            d.classList.add('rolling');
        });

        setTimeout(() => {
            diceElements.forEach(d => {
                d.classList.remove('rolling');
                d.style.animationDelay = "0s";
                const num = Math.floor(Math.random() * 6) + 1;
                setDiceDots(d, num);
                
                const rX = Math.random() * 24 - 12;
                const rY = Math.random() * 24 - 12;
                d.style.transform = `rotateX(${rX}deg) rotateY(${rY}deg) rotateZ(${Math.random() * 10 - 5}deg)`;
            });
            
            isRolling = false;
            btn.disabled = false;
            btn.innerText = "ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°";
            resetClicks();
        }, 1000);
    }

    initDice();
</script>

</body>
</html>
